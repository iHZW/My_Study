import{s as A,i as S,g as h,a as $,b as P,_ as y,r as T,H as x}from"./vendor-8AjtjclX.js";let B;A(e=>{S()?B():window.history.go(-e)});function H(e){B=e}const m={};window.$$=m;const O=h().name,C={getRSAEncodeString:"BusinessCommon",getRSADecryptString:"BusinessCommon",sdk_request:"HttpPlugin",sdk_setHeader:"Header",sdk_back:"BusinessJump",sdk_TDOnEvent:"BusinessCommon",sdk_getUserInfo:"UserInfo",sdk_dealTimeOut:"BusinessCommon",sdk_tip:"BusinessCommon",getDeviceInfo:"BusinessCommon",getVersionInfo:"AppInfo",forwardToNewPage:"BusinessJump",sdk_processPIBussnise:"BusinessJump"};function D(e){return e in C}let _=0;const g={};function v(e,t){const i="".concat(e,"_").concat(_);return _+=1,g[i]=t,i}function u(e){delete g[e]}function I(e){return"transient"in e}function d(e,...t){var i,l;const k=[],f=t.map(n=>{let a;return n==null?a="":typeof n=="function"?(a=v(e,n),I(n)&&k.push(a)):typeof n=="string"?a=n:a=JSON.stringify(n),a}),r=e.replace("sdk_","");let c;if(D(e)&&(c=C[e]),O==="android"){const n=(i=window.WebViewJavascriptBridge)===null||i===void 0?void 0:i[r];n?n.apply(window.WebViewJavascriptBridge,f):prompt("call://".concat((c?"".concat(c,"."):"")+r,"(").concat(f.map(a=>'"'.concat(a.replace(/\|/g,"||"),'"')).join("|"),")"))}else{const n=c&&window[c];n&&n[r]?n[r](...f):(l=window.YDIOS)===null||l===void 0||l[r](...f)}return()=>{k.forEach(u)}}window.__callback=function(e,t,...i){const l=g[e];l&&((!I(l)||l.transient!==!1)&&u(e),t==null?l(...i):console.error(t))};m.platformAdapter={callback:window.__callback};const V=Object.freeze(Object.defineProperty({__proto__:null,call:d,registerCallback:v,unregisterCallback:u},Symbol.toStringTag,{value:"Module"}));function E(){return new Promise(e=>{d("getUserInfo",t=>{e(t)})})}const U={};function p(e){var t;(t=U[e])===null||t===void 0||t.forEach(i=>{i()})}m.EventListener={onBack(){p("viewBack")},pageDidAppear(){p("viewDidAppear")},pageWillAppear(){p("viewWillAppear")}};const s={title:document.title,leftVisible:!0};function b(e,t){const i=s[e];i&&u(i),s[e]=t&&v("setHeader",t),t&&(t.transient=!1)}const w=()=>{P()};w.transient=!1;b("leftCallback",w);const{hasOwnProperty:o}=Object.prototype,j=()=>$(function(e){o.call(e,"titleText")&&(s.title=e.titleText||""),o.call(e,"visible")&&d("setTitleBar",{showTitleBar:e.visible},void 0);const{left:t}=e;t&&(o.call(t,"visible")&&(s.leftVisible=t.visible||!0),o.call(t,"callback")&&b("leftCallback",t.callback));const{right:i}=e;i&&(o.call(i,"text")&&(s.rightText=i.text),o.call(i,"")&&(s.rightIcon=i.icon),o.call(i,"callback")&&b("rightCallback",i.callback)),o.call(e,"extra")&&(s.data=e.extra),d("setHeader",s.title,s.leftVisible,s.leftCallback||w,s.rightText,s.rightIcon,s.rightCallback,s.data)});class M extends x{init(){return y(this,void 0,void 0,function*(){H(()=>{d("back",void 0,void 0,void 0)}),j(),yield new Promise(i=>{if(h().name==="ios"){window.event=new Event("phDeviceReady"),document.addEventListener("phDeviceReady",function(){i()},!1);const l=document.createElement("iframe");l.style.display="none",l.setAttribute("src","common-js:handshake"),document.body.appendChild(l)}else i()});const{SKAPP:t}=window;if(t){const i=yield E();t.onLogin({type:101,userId:i.customerId}),t.profileSetMultiple({accountId:i.accountId})}})}}const N=e=>y(void 0,void 0,void 0,function*(){yield T(new M(e))}),L=Object.freeze(Object.defineProperty({__proto__:null,default:N},Symbol.toStringTag,{value:"Module"}));export{V as b,L as r};
